name = "bhxh-proxy-worker"
main = "src/index.ts"
compatibility_date = "2024-12-01"
compatibility_flags = ["nodejs_compat"]

# KV Namespace for session caching
# Run: wrangler kv:namespace create BHXH_SESSION
# Then add the id below
[[kv_namespaces]]
binding = "BHXH_SESSION"
id = "2c3dacd3163f4dda97eac85c82324f0d"
preview_id = "ff7eea72287f4f8eb7c640d4c4818072"

[vars]
BHXH_BASE_URL = "https://dichvucong.baohiemxahoi.gov.vn"
AI_CAPTCHA_ENDPOINT = "http://34.126.156.34:4000/api/v1/captcha/solve"
EXTERNAL_PROXY_URL = "http://103.3.246.71:3128"
USE_PROXY = "false"
ALLOWED_ORIGINS = "*"

# For production, run:
# wrangler secret put BHXH_USERNAME
# wrangler secret put BHXH_PASSWORD
# wrangler secret put BHXH_ENCRYPTION_KEY
# wrangler secret put AI_CAPTCHA_ENDPOINT
# wrangler secret put AI_CAPTCHA_API_KEY
